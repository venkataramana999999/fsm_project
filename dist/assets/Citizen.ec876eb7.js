import{r as n,ag as U,J as l,l as a,B as O,S as Ce,ac as F,ad as We,bg as Ze}from"./index.f7de6b0e.js";import{w as Ye,u as je,C as Xe,R as b,d as r,L as s,m as Le,I as i,S as Ae,r as Qe,v as Me,x as Ue,y as Oe,M as ea,b as aa,c as ta}from"./App.9d3e290b.js";function c(t){return t.toString().length>0?parseFloat(t).toFixed(4):""}const oa=({t})=>{const ne="AIzaSyBV5XySVlxwJm_lAJ2ZoecKismiBv1ZJAo",[Fe,W]=n.exports.useState(!1),[Be,Z]=n.exports.useState(!1),[se,B]=n.exports.useState(!1),[Y,P]=n.exports.useState(!1),[de,T]=n.exports.useState(!1),[j,A]=n.exports.useState(""),[N,x]=n.exports.useState(""),[D,y]=n.exports.useState(""),[ie,I]=n.exports.useState(""),[M,f]=n.exports.useState(4),[R,w]=n.exports.useState(""),[ce,Pe]=n.exports.useState([]),[C,E]=n.exports.useState(localStorage.getItem("PhoneNumber").slice(2)),[me,H]=n.exports.useState(""),[la,z]=n.exports.useState([]),[he,$]=n.exports.useState(new Date),[Te,_]=n.exports.useState("08:00 AM - 10:00 AM"),[ue,p]=n.exports.useState(18),[Ie,L]=n.exports.useState({lat:"",long:""}),[Re,g]=n.exports.useState({lat:"",long:""}),[X,v]=n.exports.useState(17.8302),[Q,S]=n.exports.useState(79.2778),[pe,m]=n.exports.useState(17.8302),[ge,u]=n.exports.useState(79.2778),[G,J]=n.exports.useState(""),[ke,K]=n.exports.useState("10:00 AM"),[qe,V]=n.exports.useState("08:00 AM"),[ee,De]=n.exports.useState([]),[ae,te]=n.exports.useState(""),[Ne,xe]=n.exports.useState(!1),[ye,fe]=n.exports.useState(),Ee=je();n.exports.useEffect(()=>{U.get("auth/getAllUlb").then(e=>{Pe(e.data.data)}),U.get("auth/usageType").then(e=>{De(e.data.data.usageType)}),fe(localStorage.getItem("UlbOption")==="true")},[]);const k=localStorage.getItem("ULBname"),oe=localStorage.getItem("UlbId"),ve=()=>{const e=d=>{const h=d.coords.latitude,q=d.coords.longitude,we={lat:parseFloat(h),lng:parseFloat(q)};v(parseFloat(h)),S(parseFloat(q)),m(parseFloat(h)),u(parseFloat(q)),p(18),L(we),g(we)},o=()=>new F({icon:"warning",title:"Browser location is blocked",text:"Kindly unlocked the location from setting."});navigator.permissions.query({name:"geolocation"}).then(d=>{(d.state==="granted"||d.state==="prompt"||d.state==="denied")&&navigator.geolocation.getCurrentPosition(e,o)})},le=e=>{const o=e.coords.latitude,d=e.coords.longitude,h={lat:o,lng:d};v(parseFloat(o)),S(parseFloat(d)),m(parseFloat(o)),m(parseFloat(d)),p(18),L(h)},re=()=>{console.log("Unable to retrieve your location"),navigator.permissions.query({name:"geolocation"}).then(e=>{if(e.state!=="granted"){if(e.state==="prompt"){const o={lat:17.8302,lng:79.2778};v(17.8302),S(79.2778),m(17.8302),u(79.2778),p(7),L(o),g(o)}else if(e.state==="denied"){const o={lat:17.8302,lng:79.2778};v(17.8302),S(79.2778),m(17.8302),u(79.2778),p(7),L(o),g(o)}}})},He=()=>{W(!0),Z(!1),B(!1),P(!1),T(!1),A(""),x(""),y(""),I(k),f(""),w(""),E(localStorage.getItem("PhoneNumber").slice(2)),H(""),$(new Date),_("08:00 AM - 10:00 AM"),p(18),L({lat:"",long:""}),g({lat:"",long:""}),S(79.2778),v(17.8302),m(17.8302),u(79.2778),J(""),K("10:00 AM"),V("08:00 AM"),navigator.geolocation.getCurrentPosition(le,re)},ze=()=>{Z(!0),W(!1),B(!1),P(!1),T(!1),A(""),x(""),y(""),I(k),f(""),w(""),E(localStorage.getItem("PhoneNumber").slice(2)),H(""),$(new Date),_("08:00 AM - 10:00 AM"),p(18),L({lat:"",long:""}),g({lat:"",long:""}),S(79.2778),v(17.8302),m(17.8302),u(79.2778),J(""),K("10:00 AM"),V("08:00 AM"),navigator.geolocation.getCurrentPosition(le,re)},$e=()=>{W(!1),B(!0),Z(!1),P(!1),T(!1),A(""),x(""),y(""),I(k),f(4),w(""),E(localStorage.getItem("PhoneNumber").slice(2)),H(""),$(new Date),_("08:00 AM - 10:00 AM"),p(18),L({lat:"",long:""}),g({lat:"",long:""}),m(17.8302),u(79.2778),J(""),K("10:00 AM"),V("08:00 AM"),navigator.geolocation.getCurrentPosition(le,re)},Se=e=>{e.addListener("click",o=>{const d=o.latLng.lat(),h=o.latLng.lng();v(d),S(h),m(d),u(h)})},be=()=>{if(document.fullscreenElement)xe(!0),document.className="location-icon";else{xe(!1);const e=document.getElementsByClassName("current-loct");for(let o=0;o<e.length;o++){const d=e[o];d.style.left="",d.style.top="unset"}}},_e=e=>{switch(e.target.name){case"TimeRange":const o=e.target.value.split(" - "),d=o[0],h=o[1];K(h),V(d),_(e.target.value);break}},Ge=()=>{U.get(`auth/propertyTax?ULBName=${k}&HouseNo=${R}`).then(e=>{if(console.log(e),e.data.data.propertytax.length!==0)U.get(`auth/dropDown?ULBId=${oe}`).then(o=>{z(o.data.data.operators)});else return z([]),new F({icon:"warning",title:"No Records Found!"});if(P(!Y),T(!1),B(!1),A(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].ASSESSMENT_NO:""),x(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].OwnerName:""),y(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].Locality:""),f(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].Usage==="Residence"?4:e.data.data.propertytax[0].Usage==="Non Residence"?5:6:""),te(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].Usage:""),e.data.data.propertytax.length!==0&&e.data.data.propertytax[0].Lattitude.length>=6&&e.data.data.propertytax[0].Longitude.length>=6){const o={lat:parseFloat(c(e.data.data.propertytax[0].Lattitude)),lng:parseFloat(c(e.data.data.propertytax[0].Longitude))};m(parseFloat(c(e.data.data.propertytax[0].Lattitude))),u(parseFloat(c(e.data.data.propertytax[0].Longitude))),p(18),g(o)}else navigator.geolocation.getCurrentPosition(function(o){const d={lat:parseFloat(c(o.coords.latitude)),lng:parseFloat(c(o.coords.longitude))};m(parseFloat(c(o.coords.latitude))),u(parseFloat(c(o.coords.longitude))),p(18),g(d)})})},Je=()=>{U.get(`auth/propertyTax?ULBName=${k}&AssessmentNo=${G}`).then(e=>{if(e.data.data.propertytax.length!==0)U.get(`auth/dropDown?ULBId=${oe}`).then(o=>{z(o.data.data.operators)});else return z([]),new F({icon:"warning",title:"No Records Found!"});if(P(!1),T(!0),B(!1),w(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].OWNER_DOORNO:""),x(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].OwnerName:""),y(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].Locality:""),I(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].ULBName:""),f(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].Usage==="Residence"?4:e.data.data.propertytax[0].Usage==="Non Residence"?5:6:""),te(e.data.data.propertytax.length!==0?e.data.data.propertytax[0].Usage:""),e.data.data.propertytax.length!==0&&e.data.data.propertytax[0].Lattitude.length>=6&&e.data.data.propertytax[0].Longitude.length>=6){const o={lat:parseFloat(c(e.data.data.propertytax[0].Lattitude)),lng:parseFloat(c(e.data.data.propertytax[0].Longitude))};m(parseFloat(c(e.data.data.propertytax[0].Lattitude))),u(parseFloat(c(e.data.data.propertytax[0].Longitude))),p(18),g(o)}else navigator.geolocation.getCurrentPosition(function(o){const d={lat:parseFloat(c(o.coords.latitude)),lng:parseFloat(c(o.coords.longitude))};m(parseFloat(c(o.coords.latitude))),u(parseFloat(c(o.coords.longitude))),p(18),g(d)})})},Ke=()=>{const e={Name:me,ownerName:N,Zone:"NA",Number:"NA",PhoneNumber:91+C,ULBId:oe,pinCode:"NA",UsageId:M,ASSESSMENT_NO:G!==""?G:j,OWNER_DOORNO:R,Latitude:X,Longitude:Q,locality:D,UpcomingColletionDate:We(he).format(),UpcomingColletionStartTime:qe,UpcomingColletionEndTime:ke,OtherTypeData:ae};return N!==""&&C!==null?new F({title:"Are you sure?",icon:"warning",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No",customClass:{confirmButton:"btn btn-primary mx-2",cancelButton:"btn btn-danger mx-2"}}).then(o=>{o.isConfirmed&&Ee(Ze(e))}):new F({icon:"warning",title:"Please fill required fields!"})},Ve=e=>{I(e.target.value),localStorage.setItem("ULBname",e.target.value);const o=d=>{const h=ce.filter(q=>q.Name===d);return localStorage.setItem("UlbId",h[0].Id),h[0].Name};return localStorage.setItem("UlbOption",!1),fe(!ye),new F({icon:"success",title:"ULB Selected",text:`Your Selected ULB is ${o(e.target.value)}`})};return l("div",{className:"px-1",children:[a(Xe,{children:a("div",{className:"misc-inner px-1 px-sm-3 mt-2",children:l("div",{className:"w-100 px-1",children:[a(b,{className:"mb-2 text-center",children:a(r,{sm:12,children:a("h3",{children:t("CitizenRequestForm")})})}),l(b,{className:"px-1 font-small-2",children:[a(r,{md:4,sm:4,lg:4,children:a(O,{style:{fontSize:"12px",width:"100%"},color:"primary",onClick:$e,children:t("addProp").toUpperCase()})}),a(r,{md:4,sm:4,lg:4,children:a(O,{style:{fontSize:"12px",width:"100%"},color:"primary",onClick:He,children:t("SearchbyHouseNo").toUpperCase()})}),a(r,{md:4,sm:4,lg:4,children:a(O,{style:{fontSize:"12px",width:"100%"},color:"primary",onClick:ze,children:t("SearchbyTaxAssessmentNo").toUpperCase()})})]}),Fe&&a(b,{className:"px-1",children:l(r,{className:"mt-2",md:"6",sm:"12",children:[a(s,{className:"form-label required",for:"houseno",required:!0,children:t("SearchbyHouseNo")}),l(Le,{children:[a(i,{value:R,name:"houseNo",placeholder:t("searchHouseno"),required:!0,onChange:e=>w(e.target.value)}),a(O,{color:"primary",outline:!0,onClick:Ge,children:a(Ae,{size:12})})]})]})}),Y&&l(b,{tag:"form",className:"gy-1 pt-75 px-1",children:[a("hr",{color:"primary"}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"OwnerName",children:t("TaxAssessmentNo")}),a(i,{id:"AssessmentNo",placeholder:t("EnterTaxAssessmentNo"),value:j,disabled:!0,name:"AssessmentNoState",onChange:e=>A(e.target.value)})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"OwnerName",children:[t("ownerName")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{id:"OwnerName",placeholder:t("phownerName"),value:N,name:"OwnerName",onChange:e=>x(e.target.value)}),a("div",{style:{color:"red"},children:N===""?t("required"):""})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"OwnerName",children:t("Locality")}),a(i,{id:"Locality",placeholder:t("EnterLocality"),value:D,disabled:!0,name:"Locality",onChange:e=>y(e.target.value)})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"OwnerName",children:[t("Usage")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{value:M,name:"Usage",type:"select",onChange:e=>f(e.target.value),children:ee.map((e,o)=>a("option",{value:e.Id,children:e.Name},o))})]})]}),Be&&a(b,{className:"px-1",children:l(r,{className:"mt-2",md:"6",sm:"12",children:[a(s,{className:"form-label required",for:"houseno",required:!0,children:t("SearchbyTaxAssessmentNo")}),l(Le,{children:[a(i,{value:G,name:"AssessmentNoSearch",placeholder:t("phSearchTax"),required:!0,onChange:e=>J(e.target.value)}),a(O,{color:"primary",outline:!0,onClick:Je,children:a(Ae,{size:12})})]})]})}),de&&l(b,{tag:"form",className:"gy-1 pt-75 px-1",children:[a("hr",{color:"primary"}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"OwnerName",children:t("HouseNo")}),a(i,{id:"houseNo",placeholder:t("Enterhouseno"),value:R,disabled:!0,name:"houseNo",onChange:e=>w(e.target.value)})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"OwnerName",children:[t("ownerName")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{id:"OwnerName",placeholder:t("phownerName"),value:N,name:"OwnerName",onChange:e=>x(e.target.value)}),a("div",{style:{color:"red"},children:N===""?t("required"):""})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"OwnerName",children:t("Locality")}),a(i,{id:"Locality",placeholder:t("EnterLocality"),value:D,disabled:!0,name:"Locality",onChange:e=>y(e.target.value)})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"OwnerName",children:[t("Usage")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{value:M,name:"Usage",type:"select",onChange:e=>f(e.target.value),children:ee.map((e,o)=>a("option",{value:e.Id,children:e.Name},o))})]})]}),se&&l(b,{tag:"form",className:"gy-1 pt-75 px-1",children:[a("hr",{color:"primary"}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label required",for:"houseno",required:!0,children:t("HouseNo")}),a(i,{value:R,name:"houseNo",placeholder:t("Enterhouseno"),required:!0,onChange:e=>w(e.target.value)})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"OwnerName",children:t("TaxAssessmentNo")}),a(i,{id:"AssessmentNo",placeholder:t("EnterTaxAssessmentNo"),value:j,name:"AssessmentNoState",onChange:e=>A(e.target.value)})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"OwnerName",children:[t("ownerName")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{id:"OwnerName",placeholder:t("phownerName"),value:N,name:"OwnerName",onChange:e=>x(e.target.value)}),a("div",{style:{color:"red"},children:N===""?t("required"):""})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"OwnerName",children:t("Locality")}),a(i,{id:"Locality",placeholder:t("EnterLocality"),value:D,onChange:e=>y(e.target.value),name:"Locality"})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"usgae",children:[t("Usage")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{value:M,name:"Usage",type:"select",onChange:e=>f(e.target.value),children:ee.map((e,o)=>a("option",{value:e.Id,children:e.Name},o))})]}),M==="6"&&l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"other",children:[t("Other")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{id:"other",placeholder:t("enterOtherComment"),value:ae,type:"textarea",name:"OtherComment",onChange:e=>te(e.target.value)}),a("div",{style:{color:"red"},children:M==="6"&&ae===""?t("required"):""})]})]}),l(b,{className:"px-1 gy-1 pt-75",children:[a("hr",{}),l(r,{md:4,xs:12,lg:4,sm:12,children:[l(s,{className:"form-label",for:"phoneNumber",children:[t("phoneNumber")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{value:C,pattern:"[1-9]{1}[0-9]{9}",name:"phoneNumber",type:"number",onChange:e=>E(e.target.value)}),a("div",{style:{color:"red"},children:C!==null?C.length===10?"":C.length>10?t("phoperContact"):C.length===0?t("required"):"":""})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"LandMark",children:t("propAddress")}),a(i,{value:me,name:"LandMark",onChange:e=>H(e.target.value)})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"visitDate",children:t("DatetoVisit")}),a(Qe,{id:"visitDate",name:"visitDate",className:"form-control",onChange:e=>$(e[0]),value:he,options:{dateFormat:"d M Y"}})]}),l(r,{md:4,xs:12,lg:4,sm:12,children:[a(s,{className:"form-label",for:"TimeRange",children:t("TimeRange")}),l(i,{value:Te,name:"TimeRange",type:"select",onChange:_e,children:[a("option",{value:"08:00 AM - 10:00 AM",children:"08:00 AM - 10:00 AM"}),a("option",{value:"10:00 AM - 12:00 PM",children:"10:00 AM - 12:00 PM"}),a("option",{value:"12:00 PM - 02:00 PM",children:"12:00 PM - 02:00 PM"}),a("option",{value:"02:00 PM - 04:00 PM",children:"02:00 PM - 04:00 PM"}),a("option",{value:"04:00 PM - 06:00 PM",children:"04:00 PM - 06:00 PM"}),a("option",{value:"06:00 PM - 08:00 PM",children:"06:00 PM - 08:00 PM"})]})]}),a(r,{md:4,xs:12}),se&&l(Ce,{children:[a(r,{md:12,xs:12,lg:12,children:a("div",{style:{height:"30vh",width:"100%",top:0,left:0,overflow:"visible"},children:l(Me,{bootstrapURLKeys:{key:ne},center:Ie,zoom:ue,onGoogleApiLoaded:({map:e,maps:o})=>Se(e),yesIWantToUseGoogleMapApiInternals:!0,onChange:be,children:[a(Ue,{lat:parseFloat(X),lng:parseFloat(Q),name:"My Marker",color:"blue"}),a("div",{className:Ne===!0?"location-icon":"current-loct",children:a("img",{style:{height:"25px",width:"25px"},src:Oe,onClick:()=>ve()})})]})})}),l(r,{md:6,xs:12,children:[l(s,{className:"form-label",for:"latitude",children:[t("latitude")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{disabled:!0,required:!0,name:"latitude",value:c(X),id:"latitude",placeholder:t("phlatitude"),onChange:e=>v(e.target.value)})]}),l(r,{md:6,xs:12,children:[l(s,{className:"form-label",for:"longitude",children:[t("longitude"),"  ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{disabled:!0,required:!0,name:"longitude",value:c(Q),id:"longitude",placeholder:t("phlongitude"),onChange:e=>S(e.target.value)})]})]}),de===!0||Y===!0?l(Ce,{children:[a(r,{md:12,xs:12,lg:12,children:a("div",{style:{height:"30vh",width:"100%",top:0,left:0,overflow:"visible"},children:l(Me,{bootstrapURLKeys:{key:ne},center:Re,zoom:ue,onGoogleApiLoaded:({map:e,maps:o})=>Se(e),yesIWantToUseGoogleMapApiInternals:!0,onChange:be,children:[a(Ue,{lat:parseFloat(pe),lng:parseFloat(ge),name:"My Marker",color:"blue"}),a("div",{className:Ne===!0?"location-icon":"current-loct",children:a("img",{style:{height:"25px",width:"25px"},src:Oe,onClick:()=>ve()})})]})})}),l(r,{md:6,xs:12,children:[l(s,{className:"form-label",for:"latitudeBothShow",children:[t("latitude")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{disabled:!0,required:!0,name:"latitudeBothShow",value:c(pe),id:"latitude",placeholder:t("phlatitude"),onChange:e=>m(e.target.value)})]}),l(r,{md:6,xs:12,children:[l(s,{className:"form-label",for:"longitudeBothShow",children:[t("longitude")," ",a("span",{style:{color:"red"},children:"*"})]}),a(i,{disabled:!0,required:!0,name:"longitudeBothShow",value:c(ge),id:"longitude",placeholder:t("phlongitude"),onChange:e=>u(e.target.value)})]})]}):"",a(r,{xs:6,className:"text-center mt-2 pt-50 pb-5"}),a(r,{xs:6,className:"text-center mt-2 pt-50 pb-5",children:a(O,{type:"submit",className:"w-50",color:"primary",onClick:Ke,children:t("save")})})]})]})})}),l(ea,{isOpen:ye,className:"modal-dialog-centered modal-sm",backdrop:"static",children:[a(aa,{className:"bg-transparent"}),a("div",{className:"text-center",style:{margin:"-25px"},children:a("h3",{className:"mt-2",children:"Please Select the Required ULB"})}),a(ta,{className:"",children:l("div",{className:"mt-2 mb-1",children:[l(s,{className:"form-label",for:"ulb",children:[t("ulb")," ",a("span",{style:{color:"red"},children:"*"})]}),l(i,{value:ie,name:"ULBname",type:"select",onChange:e=>Ve(e),children:[a("option",{value:"",children:t("select")}),ce.map((e,o)=>a("option",{value:e.Name,children:e.Name},o))]}),a("div",{style:{color:"red"},children:ie===""?t("required"):""})]})})]})]})},sa=Ye()(oa);export{sa as default};
