import{p as Z,t as Ye,m as Ge,k as Je,l as e,r as n,b6 as ve,b3 as ye,L as de,J as s,B as q,b7 as Xe,aD as Ke,ad as Se,b8 as Qe,b9 as ea,ba as H,S as aa,ac as sa,bb as ta,bc as la}from"./index.fb50a045.js";import{w as me,u as ue,M as ee,b as ae,c as se,R as te,d as N,L as C,I as S,e as Ce,X as le,T as Re,U as Ue,D as Ae,h as ke,i as we,j as re,F as Ee,k as Ie,B as ra,C as na,a as oa,m as ca,n as ia,S as da,f as ma,g as ua,l as pa}from"./App.89c56174.js";import{u as ha,C as ga}from"./index.esm.c89906bc.js";var ba=["className","cssModule","valid","tooltip","tag"];function Na(t,c){if(t==null)return{};var r=fa(t,c),i,d;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(t);for(d=0;d<g.length;d++)i=g[d],!(c.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(r[i]=t[i]))}return r}function fa(t,c){if(t==null)return{};var r={},i=Object.keys(t),d,g;for(g=0;g<i.length;g++)d=i[g],!(c.indexOf(d)>=0)&&(r[d]=t[d]);return r}var xa={children:Z.exports.node,tag:Ye,className:Z.exports.string,cssModule:Z.exports.object,valid:Z.exports.bool,tooltip:Z.exports.bool};function Me(t){var c=t.className,r=t.cssModule,i=t.valid,d=i===void 0?void 0:i,g=t.tooltip,p=t.tag,P=p===void 0?"div":p,R=Na(t,ba),U=g?"tooltip":"feedback",f=Ge(Je(c,d?"valid-".concat(U):"invalid-".concat(U)),r);return e(P,{...R,className:f})}Me.propTypes=xa;const va=({open:t,handleModal:c,t:r})=>{const[i,d]=n.exports.useState(""),[g,p]=n.exports.useState(""),[P,R]=n.exports.useState(""),[U,f]=n.exports.useState(""),[B,A]=n.exports.useState(""),[T,h]=n.exports.useState(""),[L,I]=n.exports.useState(""),[j,y]=n.exports.useState(""),[$,k]=n.exports.useState(""),z=e(le,{className:"cursor-pointer",size:15,onClick:c}),D=ue(),l=o=>{let b=!1;if(B===""&&o==="handleSubmit"?(b=!0,h(`${r("required")}`)):(b=!1,h("")),L===""&&o==="handleSubmit")b=!1,y(`${r("required")}`);else if(L){const G=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;L.match(G)?(b=!0,y("")):(b=!1,y(`${r("phoperEmail")}`))}else b=!0,y("");return i===""&&o==="handleSubmit"?(b=!1,p(`${r("required")}`)):(b=!0,p("")),P===""&&o==="handleSubmit"?(b=!1,f(`${r("required")}`)):(b=!0,f("")),b},m=o=>{d(o.target.value)},x=o=>{R(o.target.value)},w=o=>{switch(o.target.name){case"username":A(o.target.value);break;case"useremail":I(o.target.value);break;case"userPassword":k(o.target.value);break}l("handleChange")},O=o=>{o.preventDefault(),l("handleSubmit")&&(D(Xe({id:"",userName:B,email:L,roleId:i,ulbId:P,password:$})),c(),d(""),A(""),k(""),R(""),I(""),p(""),h(),f(""),y(""))},V=()=>{c(),d(""),A(""),k(""),R(""),I(""),p(""),h(),f(""),y("")};n.exports.useEffect(()=>{D(ve()),D(ye({}))},[]);const M=de(o=>o),Y=M.UserRedx.RoleListAdmin.data===void 0?[]:M.UserRedx.RoleListAdmin.data[0],F=M.ulbManagement.ulbData&&M.ulbManagement.ulbData.data?M.ulbManagement.ulbData.data.data.ulbs:[];return s(ee,{isOpen:t,toggle:c,className:"modal-dialog-centered modal-lg",backdrop:"static",children:[e(ae,{toggle:c,close:z,tag:"div",className:"bg-transparent"}),s(se,{className:"px-sm-5 mx-50 pb-5 text-success",children:[e("div",{className:"text-center mb-2",children:e("h3",{className:"mb-1",children:r("addNewUser")})}),s(te,{tag:"form",className:"gy-1 pt-75",children:[s(N,{md:6,xs:12,children:[s(C,{className:"form-label",for:"username",children:[r("userName")," ",e("span",{style:{color:"red",fontSize:"15px"},children:"*"})]}),e(S,{id:"username",name:"username",placeholder:r("enterUser"),value:B,type:"text",onChange:o=>w(o)}),e("div",{style:{color:"red"},children:T})]}),s(N,{md:6,xs:12,children:[s(C,{className:"form-label",for:"userEmail",children:[r("email")," ",e("span",{style:{color:"red",fontSize:"15px"},children:"*"})]}),e(S,{id:"useremail",name:"useremail",placeholder:r("EnteruserEmail"),value:L,type:"email",onChange:o=>w(o)}),e("div",{style:{color:"red"},children:j})]}),s(N,{md:6,xs:12,children:[e(C,{className:"form-label required",for:"UserPassword",children:r("userPass")}),e(Ce,{className:"input-group-merge",name:"userPassword",value:$,onChange:o=>w(o)})]}),s(N,{md:6,xs:12,children:[s(C,{className:"form-label required",for:"roleName",children:[r("role")," ",e("span",{style:{color:"red",fontSize:"15px"},children:"*"})]}),s(S,{type:"select",name:"roleName",id:"roleName",value:i,onChange:o=>m(o),required:!0,children:[e("option",{value:"",children:r("select")}),e("option",{value:Y.roleId,children:Y.name})]}),e("div",{style:{color:"red"},children:g})]}),s(N,{md:6,xs:12,children:[s(C,{className:"form-label",for:"ulbName",children:["ULB ",e("span",{style:{color:"red",fontSize:"15px"},children:"*"})]}),s(S,{type:"select",name:"ulbName",id:"ulbName",value:P,onChange:o=>x(o),required:!0,children:[e("option",{value:"",children:r("select")}),F===void 0?[]:F.map(o=>e("option",{value:o.ulbId,children:o.name}))]}),e("div",{style:{color:"red"},children:U})]}),s(N,{xs:12,className:"text-center mt-2 pt-50",children:[e(q,{type:"reset",className:"me-1",color:"secondary",outline:!0,onClick:V,children:r("cancel")}),e(q,{color:"success",onClick:O,children:r("save")})]})]})]})]})},ya=me()(va),Sa=({open:t,handleModal:c,t:r})=>{const[i,d]=n.exports.useState(!1),[g,p]=n.exports.useState(""),[P,R]=n.exports.useState(""),U=(l,m,x)=>{switch(m!==void 0&&m===!0||m!==null&&m===!0){case(!!m&&m.IsMobileAppAccess===!0&&m.IsWebAppAccess===!1):p("app"),R(x),d(!i);break;case(m.IsWebAppAccess===!0&&m.IsMobileAppAccess===!1):p("web"),R(x),d(!i);break;case(m.IsWebAppAccess===!0&&m.IsMobileAppAccess===!0):p("both"),d(!i),R(x);break;default:p(""),R("");break}},f=e(le,{className:"cursor-pointer",size:15,onClick:c}),B=e(le,{className:"cursor-pointer",size:15,onClick:U}),A=ue(),T=[{id:1,header:"Sr No",accessor:"id"},{id:2,header:"Role",accessor:"name"},{id:3,header:"Access Mode",accessor:"accessMode"},{id:5,header:"Updated Date",accessor:"updatedAt"},{id:6,header:"Action",accessor:"actionButton"}],h=l=>{A(Qe({id:l}))},L=l=>{switch(l.target.value){case"web":p(l.target.value);break;case"app":p(l.target.value);break;case"both":p(l.target.value);break}},I={RoleName:""},{control:j,handleSubmit:y,formState:{errors:$}}=ha({defaultValues:I}),k=l=>{console.log(l,"datarole"),console.log(g,"roleAccessEdit")};n.exports.useEffect(()=>{A(Ke({field:"all",query:"",sortingName:"",sortingValue:"",page:1,limit:10}))},[]);const z=de(l=>l),D=z.UserRedx.RoleList?z.UserRedx.RoleList.data?z.UserRedx.RoleList.data.data:[]:[];return s("div",{children:[s(ee,{isOpen:t,toggle:c,className:"modal-dialog-centered modal-xl",backdrop:"static",children:[e(ae,{toggle:c,close:f,tag:"div",className:"bg-transparent"}),e(se,{className:"",children:s("div",{className:"text-center mb-2",children:[e("h3",{className:"mb-1",children:r("RoleManagement")}),e("div",{className:"react-dataTable",children:s(Re,{responsive:!0,children:[e("thead",{children:e("tr",{children:T.length!==0?T.map((l,m)=>e("th",{scope:"col",className:"text-nowrap",children:l.header},m)):[]})}),e("tbody",{children:!!D&&D.length!==0?D.map((l,m)=>e("tr",{children:T.map((x,w)=>{switch(x.accessor){case"updatedAt":return l.updatedAt===null?"_":e("td",{children:Se(l.updatedAt).format("DD-MMM-YYYY hh:mm a")},w);case"accessMode":switch(!0){case(l.isRoleAccess.IsWebAppAccess===!0&&l.isRoleAccess.IsMobileAppAccess===!0):return e("td",{className:"text-nowrap",children:" Web | App"},w);case l.isRoleAccess.IsWebAppAccess:return e("td",{className:"text-nowrap",children:" Web"},w);case l.isRoleAccess.IsMobileAppAccess:return e("td",{className:"text-nowrap",children:" App"},w);default:return e("td",{className:"text-nowrap",children:"Both "},w)}case"actionButton":return e("div",{className:"d-flex align-items-center justify-content-center",children:s(Ue,{children:[e(Ae,{className:"pe-1",tag:"span",children:e(ke,{size:15})}),s(we,{end:!0,children:[s(re,{children:[e(Ee,{size:15}),e("span",{className:"align-middle ms-50",onClick:()=>U(l.roleId,l.isRoleAccess,l.name),children:r("edit")})]}),s(re,{children:[e(Ie,{size:15}),e("span",{className:"align-middle ms-50",onClick:()=>h(l.roleId),children:r("delete")})]})]})]})});default:return e("td",{className:"text-nowrap",children:l[x.accessor]===null||l[x.accessor]==="null"?"_":l[x.accessor]},w)}})},m)):[]})]})})]})})]}),s(ee,{isOpen:i,toggle:U,className:"modal-dialog-centered modal-md",backdrop:"static",children:[e(ae,{toggle:U,close:B,tag:"div",className:"bg-transparent"}),s(se,{className:"",children:[e("div",{className:"text-center mb-2",children:e("h3",{className:"mb-1",children:r("editRole")})}),s(te,{tag:"form",className:"gy-1 pt-75",onSubmit:y(k),children:[s(N,{md:6,xs:12,children:[e(C,{className:"form-label",for:"RoleName",children:r("roleName")}),e(ga,{control:j,name:"RoleName",render:({field:l})=>(l.value===""&&(l.value=P),e(S,{...l,id:"RoleName",placeholder:"Enter role name",value:l.value,invalid:$.RoleName&&!0}))}),$.RoleName&&s(Me,{children:[r("EnterRoleName")," "]})]}),s(N,{md:6,xs:12,children:[e(C,{className:"form-label",for:"roleAccessEdit",children:r("accessMode")}),s(S,{type:"select",name:"roleAccessEdit",id:"roleAccessEdit",onChange:l=>L(l),children:[e("option",{value:"web",children:"Web"}),e("option",{value:"app",children:"Mobile Application"}),e("option",{value:"both",children:"Both"})]})]}),s(N,{xs:12,className:"text-center mt-2 pt-50",children:[e(q,{type:"reset",className:"me-1",color:"secondary",outline:!0,onClick:U,children:r("cancel")}),e(q,{type:"submit",color:"primary",children:r("saveChange")})]})]})]})]})]})},Ca=me()(Sa),Ra=({t})=>{const c=ue(),[r,i]=n.exports.useState(!1),[d,g]=n.exports.useState(!1),[p,P]=n.exports.useState(!1),[R,U]=n.exports.useState(0),[f,B]=n.exports.useState(10),[A,T]=n.exports.useState(1),[h,L]=n.exports.useState("selected"),[I,j]=n.exports.useState(""),[y,$]=n.exports.useState(""),[k,z]=n.exports.useState("desc"),[D,l]=n.exports.useState(""),[m,x]=n.exports.useState(""),[w,O]=n.exports.useState(""),[V,M]=n.exports.useState(""),[Y,F]=n.exports.useState(""),[o,b]=n.exports.useState(""),[G,ne]=n.exports.useState(""),[_,J]=n.exports.useState(""),[Pe,W]=n.exports.useState(""),[pe,X]=n.exports.useState(""),[Le,De]=n.exports.useState(""),he=()=>i(!r),ge=()=>P(!p),be=()=>{let a=!1;if(o!==""?(a=!1,ne("")):(a=!0,ne(`${t("required")}`)),_!=="")a=!0,W("");else if(_){const u=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;_.match(u)?(a=!0,W("")):(a=!1,W(`${t("phoperEmail")}`))}else a=!1,W(`${t("required")}`);return m!==""?(a=!0,O("")):(a=!1,O(`${t("required")}`)),V!==""?(a=!0,F("")):(a=!1,F(`${t("required")}`)),a},$e=a=>{x(a.target.value)},ze=a=>{M(a.target.value)},oe=a=>{switch(be(),a.target.name){case"username":b(a.target.value);break;case"useremail":J(a.target.value);break;case"userPassword":X(a.target.value);break}},qe=a=>{a.preventDefault(),be()&&(c(ta({id:Le,userName:o,email:_,roleId:m,ulbId:V,password:pe,page:A,limit:f,selectedField:h})),x(""),b(""),X(""),M(""),J(""),g(!1))},Be=()=>{g(!1),x(""),b(""),X(""),M(""),J(""),O(""),ne(),F(""),W("")},Te=a=>{const u=a.target.value;j(u),c(H({field:"search",query:u,sortingName:y,sortingValue:k,page:A,limit:f,selectedField:h}))},Fe=a=>{B(parseInt(a.target.value));const u={field:"all",query:I,sortingName:y,sortingValue:k,page:A,limit:parseInt(a.target.value),selectedField:h};c(H(u))},je=a=>{U(a.selected),T(a.selected+1);const u={field:"all",query:I,sortingName:y,sortingValue:k,page:a.selected+1,limit:f,selectedField:h};c(H(u))},Ne=(a,u)=>{let v;y===u.accessor?(v=k==="desc"?"asc":"desc",$(u.accessor),z(v)):($(u.accessor),z("desc"),v="desc"),l(u.accessor);const Q={field:"sorting",query:I,sortingName:u.accessor,sortingValue:v,page:A,limit:f,selectedField:h};c(H(Q))},Oe=a=>{L(a.target.value)},K=a=>{g(!d),x(a.roleId),b(a.userName),X(""),M(a.ULBId),J(a.email),De(a.userId)},Ve=a=>{c(la({id:a}))};n.exports.useEffect(()=>{c(ea());const a={field:"all",query:I,sortingName:y,sortingValue:k,page:A,limit:f,selectedField:h};c(ve()),c(H(a)),c(ye({}))},[]);const E=de(a=>a),ce=E.UserRedx?E.UserRedx.userHeaderData:[],ie=E.UserRedx.userData&&E.UserRedx.userData.data?E.UserRedx.userData.data.data.users:[],_e=E.UserRedx.userData.data?E.UserRedx.userData.data.totalCount:0,We=Math.ceil(_e/f),fe=E.ulbManagement.ulbData&&E.ulbManagement.ulbData.data?E.ulbManagement.ulbData.data.data.ulbs:[],Ze=e(le,{className:"cursor-pointer",size:15,onClick:K}),xe=E.UserRedx.RoleListAdmin.data===void 0?[]:E.UserRedx.RoleListAdmin.data[0];return s("div",{children:[e(n.exports.Fragment,{children:e(ra,{title:t("userManagement"),data:[{title:"UserManagement"},{title:`${t("userManagement")}`}]})}),s(na,{children:[e(oa,{className:"flex flex-column align-items-end border-bottom",children:s(te,{className:"align-items-end",children:[s(N,{className:"d-flex align-items-center",sm:"6",children:[e("div",{className:"d-flex align-items-center",children:s(S,{className:"dataTable-select",type:"select",id:"sort-select",value:h,style:{width:"100px",padding:"5%"},onChange:a=>Oe(a),children:[e("option",{value:"selected",children:t("select")}),e("option",{value:"roleSelected",children:t("role")}),e("option",{value:"UserSelected",children:t("User")})]})}),s(ca,{className:"",children:[e(ia,{children:e(da,{size:14})}),e(S,{className:"dataTable-filter mb-40",type:"text",bsSize:"sm",placeholder:h==="selected"?`${t("searchby")}`:h==="roleSelected"?`${t("SearchbyRole")}`:h==="UserSelected"?`${t("SearchbyUser")}`:"",id:"search-input",disabled:h==="selected",value:I,onChange:Te})]})]}),s(N,{className:"d-flex align-items-center",sm:"6",style:{marginRight:"-70px"},children:[e(q,{className:"ms-2",color:"success",onClick:he,children:e("span",{className:"align-middle",children:t("addNewUser")})}),e(q,{className:"ms-2",color:"success",onClick:ge,children:e("span",{className:"align-middle ms-50",children:t("role")})})]})]})}),s("div",{className:"react-dataTable",children:[s(Re,{responsive:!0,children:[e("thead",{children:e("tr",{children:ce.length!==0?ce.map((a,u)=>s("th",{scope:"col",className:"text-nowrap",children:[a.header,a.header==="Action"?"":s(aa,{children:[" ",D===a.accessor&&k==="asc"?e(ma,{onClick:v=>Ne(v,a)}):e(ua,{onClick:v=>Ne(v,a)})]})]},u)):[]})}),e("tbody",{children:!!ie&&ie.length!==0?ie.map((a,u)=>e("tr",{children:ce.map((v,Q)=>{switch(v.accessor){case"updatedAt":return a.updatedAt===null?"_":e("td",{children:Se(a.updatedAt).format("lll")},Q);case"actionButton":return e("div",{className:"d-flex align-items-center justify-content-center",children:s(Ue,{children:[e(Ae,{className:"pe-1",tag:"span",children:e(ke,{size:15,style:{cursor:"pointer"}})}),s(we,{end:!0,children:[s(re,{onClick:()=>K(a),children:[e(Ee,{size:15}),e("span",{className:"align-middle ms-50",children:t("edit")})]}),s(re,{onClick:()=>{new sa({title:`${t("ulbDeleteErr1")}`,text:`${t("ulbDeleteErr2")}`,icon:"warning",showDenyButton:!0,confirmButtonText:`${t("ulbDeleteErr3")}`,denyButtonText:`${t("ulbDeleteErr4")}`,customClass:{confirmButton:"btn btn-success mx-2",cancelButton:"btn btn-danger mx-2"}}).then(He=>{He.isConfirmed&&Ve(a.userId)})},children:[e(Ie,{size:15}),e("span",{className:"align-middle ms-50",children:t("delete")})]})]})]})});default:return e("td",{className:"text-nowrap",children:a[v.accessor]===null||a[v.accessor]==="null"?"_":a[v.accessor]},Q)}})},u)):[]})]}),e("div",{className:"d-flex float-end",children:s("div",{className:"d-flex align-items-center",children:[e(C,{for:"sort-select",children:t("Page")}),s(S,{className:"dataTable-select",type:"select",style:{width:"90px"},id:"sort-select",value:f,onChange:a=>Fe(a),children:[e("option",{value:10,children:"10"}),e("option",{value:25,children:"25"}),e("option",{value:50,children:"50"}),e("option",{value:75,children:"75"}),e("option",{value:100,children:"100"})]}),e(pa,{previousLabel:"",nextLabel:"",breakLabel:"...",pageCount:We,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:"active",forcePage:R,onPageChange:a=>je(a),pageClassName:"page-item",breakClassName:"page-item",nextLinkClassName:"page-link",pageLinkClassName:"page-link",breakLinkClassName:"page-link",previousLinkClassName:"page-link",nextClassName:"page-item next-item",previousClassName:"page-item prev-item",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pe-1 mt-1"})]})})]})]}),e(ya,{open:r,handleModal:he}),e(Ca,{open:p,handleModal:ge}),s(ee,{isOpen:d,toggle:K,className:"modal-dialog-centered modal-lg",backdrop:"static",children:[e(ae,{toggle:K,close:Ze,tag:"div",className:"bg-transparent"}),s(se,{className:"px-sm-5 mx-50 pb-5",children:[e("div",{className:"text-center mb-2",children:e("h3",{className:"mb-1",children:t("editUser")})}),s(te,{tag:"form",className:"gy-1 pt-75",children:[s(N,{md:6,xs:12,children:[e(C,{className:"form-label",for:"username",children:t("userName")}),e(S,{id:"username",name:"username",placeholder:t("enterUser"),value:o,onChange:a=>oe(a),required:!0}),e("div",{style:{color:"red"},children:G})]}),s(N,{md:6,xs:12,children:[s(C,{className:"form-label",for:"userEmail",children:[t("email")," ",e("span",{style:{color:"red",fontSize:"15px"},children:"*"})]}),e(S,{id:"useremail",name:"useremail",placeholder:t("EnteruserEmail"),value:_,type:"email",onChange:a=>oe(a)}),e("div",{style:{color:"red"},children:Pe})]}),s(N,{md:6,xs:12,children:[e(C,{className:"form-label required",for:"UserPassword",children:t("userPass")}),e(Ce,{className:"input-group-merge",name:"userPassword",value:pe,onChange:a=>oe(a)})]}),s(N,{md:6,xs:12,children:[s(C,{className:"form-label required",for:"roleName",children:[t("role")," ",e("span",{style:{color:"red",fontSize:"15px"},children:"*"})]}),s(S,{type:"select",name:"roleName",id:"roleName",value:m,onChange:a=>$e(a),required:!0,children:[e("option",{value:"",children:"Select..."}),e("option",{value:xe.roleId,children:xe.name})]}),e("div",{style:{color:"red"},children:w})]}),s(N,{md:6,xs:12,children:[s(C,{className:"form-label",for:"ulbName",children:["ULB ",e("span",{style:{color:"red",fontSize:"15px"},children:"*"})]}),s(S,{type:"select",name:"ulbName",id:"ulbName",value:V,onChange:a=>ze(a),required:!0,children:[e("option",{value:"",children:t("select")}),fe===void 0?[]:fe.map(a=>e("option",{value:a.ulbId,children:a.name}))]}),e("div",{style:{color:"red"},children:Y})]}),s(N,{xs:12,className:"text-center mt-2 pt-50",children:[e(q,{type:"reset",color:"secondary",className:"me-1",outline:!0,onClick:Be,children:t("cancel")}),e(q,{type:"submit",color:"primary",onClick:qe,children:t("saveChange")})]})]})]})]})]})},wa=me()(Ra);export{wa as default};
